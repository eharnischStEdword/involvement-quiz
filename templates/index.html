<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5JQ9X7HQPT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5JQ9X7HQPT');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Your Path at St. Edward</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#005921">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="St. Edward">
    <meta name="description" content="Find your path in the St. Edward Catholic community through our interactive ministry discovery tool">
    <meta name="application-name" content="St. Edward Ministry Finder">
    
    <!-- Enhanced iOS PWA Support -->
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-TileColor" content="#005921">
    <meta name="msapplication-config" content="none">
    <meta name="msapplication-TileImage" content="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- iOS Splash Screen Meta Tags -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Preparing Your Journey...</div>
        <div class="loading-subtext">
            Getting everything ready for you ⛪
        </div>
    </div>
    
 <header class="header">
    <div class="header-content header-clickable" id="headerLogo">
        <img src="https://static.wixstatic.com/media/a33a4b_ed0efbf5e52d458ab137fc4f85e55260~mv2.png" alt="St. Edward Church Logo" class="header-logo" />
        <div class="logo-text">St. Edward Church & School</div>
    </div>
</header>

<div class="container">
    <div class="main-card">
        <div class="card-header">
            <h2 class="welcome-title">Welcome to <span class="church-name">St. Edward</span>!</h2>
            <div class="subtitle">Find Your Path in Our Community</div>
            <div class="theme-verse">"Through Love, Serve One Another" - Galatians 5:13</div>
            <p>Let's help you discover the perfect way to get involved in our community. This takes just 2-3 minutes!</p>
            <div class="mobile-save-container" id="mobileSaveContainer" style="display: none;">
                <div class="mobile-save-banner">
                    <div class="mobile-save-icon">📱</div>
                    <div class="mobile-save-text">
                        <strong>Save to Home Screen</strong><br>
                        <small>Get quick access to St. Edward ministries</small>
                    </div>
                    <button class="mobile-save-btn" onclick="showIOSInstructions(); return false;">
                        Save
                    </button>
                </div>
            </div>
        </div>

            <div class="card-content">
                <div class="progress-container">
                    <div class="progress">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Let's get started!</div>
                </div>
                
                <!-- Question 1: Age -->
                <div class="question active" id="q1">
                    <div class="question-icon">👤</div>
                    <h2>First, tell us about yourself:</h2>
                    <p class="question-helper">Select the option that best describes you or your child</p>
                    <div class="button-group">
                        <button class="option-btn" data-answer="infant" data-type="age">
                            <span class="btn-emoji">👶</span> Infant (0-3)
                        </button>
                        <button class="option-btn" data-answer="elementary" data-type="age">
                            <span class="btn-emoji">🎒</span> Elementary School (PreK-Grade 5)
                        </button>
                        <button class="option-btn" data-answer="junior-high" data-type="age">
                            <span class="btn-emoji">📚</span> Junior High (Grades 6-8)
                        </button>
                        <button class="option-btn" data-answer="high-school" data-type="age">
                            <span class="btn-emoji">🎓</span> High School (Grades 9-12)
                        </button>
                        <button class="option-btn" data-answer="college-young-adult" data-type="age">
                            <span class="btn-emoji">🎯</span> College & Young Adult (18-35)
                        </button>
                        <button class="option-btn" data-answer="married-parents" data-type="age">
                            <span class="btn-emoji">💚</span> Married Couples & Parents
                        </button>
                        <button class="option-btn" data-answer="journeying-adults" data-type="age">
                            <span class="btn-emoji">🌟</span> Journeying Adults (30+)
                        </button>
                    </div>
                </div>

                <!-- Question 2: Gender -->
                <div class="question" id="q2">
                    <div class="question-icon">🙋‍♀️❔🙋‍♂️</div>
                    <h2>Some ministries are specific to men or women</h2>
                    <p class="question-helper">This helps us show you all relevant opportunities</p>
                    <div class="button-group">
                        <button class="option-btn" data-answer="male" data-type="gender">
                            <i class="fas fa-male" style="font-size: 1.5rem;"></i> Male
                        </button>
                        <button class="option-btn" data-answer="female" data-type="gender">
                            <i class="fas fa-female" style="font-size: 1.5rem;"></i> Female
                        </button>
                        <button class="option-btn" data-answer="skip" data-type="gender">
                            <span class="btn-emoji">➡️</span> Show me everything
                        </button>
                    </div>
                    <div class="navigation">
                        <button class="nav-btn nav-back" data-question="2">← Back</button>
                        <div></div>
                    </div>
                </div>

                <!-- Question 3: State in Life -->
                <div class="question" id="q3">
                    <div class="question-icon">💫</div>
                    <h2>Which describes your state in life?</h2>
                    <p class="question-helper">Select all that apply to you:</p>
                    <div class="checkbox-group modern" id="state-checkboxes">
                        <div class="checkbox-item checkbox-clickable" data-value="single">
                            <input type="checkbox" id="state-single" value="single">
                            <label for="state-single">
                                <span class="checkbox-emoji">🌱</span> Single
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="married">
                            <input type="checkbox" id="state-married" value="married">
                            <label for="state-married">
                                <span class="checkbox-emoji">💍</span> Married
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="parent">
                            <input type="checkbox" id="state-parent" value="parent">
                            <label for="state-parent">
                                <span class="checkbox-emoji">🧑‍🧒‍🧒</span> Parent
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="none-of-above">
                            <input type="checkbox" id="state-none-of-above" value="none-of-above">
                            <label for="state-none-of-above">
                                <span class="checkbox-emoji">✨</span> None of the above
                            </label>
                        </div>
                    </div>
                    <div class="navigation">
                        <button class="nav-btn nav-back" data-question="3">← Back</button>
                        <button class="nav-btn primary nav-next-state">Continue →</button>
                    </div>
                </div>

                <!-- Question 4: Situation -->
                <div class="question" id="q4">
                    <div class="question-icon">📋</div>
                    <h2>What brings you here today?</h2>
                    <p class="question-helper">Select all that apply:</p>
                    <div class="checkbox-group modern" id="situation-checkboxes">
                        <div class="checkbox-item checkbox-clickable" data-value="new-to-stedward">
                            <input type="checkbox" id="new-to-stedward" value="new-to-stedward">
                            <label for="new-to-stedward">
                                <span class="checkbox-emoji">🆕</span> New to St. Edward
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="returning-to-church">
                            <input type="checkbox" id="returning-to-church" value="returning-to-church">
                            <label for="returning-to-church">
                                <span class="checkbox-emoji">🙏</span> Returning to Church
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="new-to-nashville">
                            <input type="checkbox" id="new-to-nashville" value="new-to-nashville">
                            <label for="new-to-nashville">
                                <span class="checkbox-emoji">📍</span> New to Nashville
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="current-parishioner">
                            <input type="checkbox" id="current-parishioner" value="current-parishioner">
                            <label for="current-parishioner">
                                <span class="checkbox-emoji">💚</span> Current Parishioner
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="just-curious">
                            <input type="checkbox" id="just-curious" value="just-curious">
                            <label for="just-curious">
                                <span class="checkbox-emoji">🔎</span> Just Exploring
                            </label>
                        </div>
                        <div class="checkbox-item checkbox-clickable" data-value="situation-none-of-above">
                            <input type="checkbox" id="situation-none-of-above" value="situation-none-of-above">
                            <label for="situation-none-of-above">
                                <span class="checkbox-emoji">🙂‍↔️</span> None of the above
                            </label>
                        </div>
                    </div>
                    <div class="navigation">
                        <button class="nav-btn nav-back" data-question="4">← Back</button>
                        <button class="nav-btn primary nav-next-situation">Continue →</button>
                    </div>
                </div>

                <!-- Question 5: Interests -->
                <div class="question" id="q5">
                    <div class="question-icon">💡</div>
                    <h2>What interests you most?</h2>
                    <p class="question-helper">Select all areas you'd like to explore:</p>
                    <div class="checkbox-group modern" id="interest-checkboxes">
                        <!-- Filled dynamically based on age -->
                    </div>
                    <div class="navigation">
                        <button class="nav-btn nav-back" data-question="5">← Back</button>
                        <button class="nav-btn primary celebrate nav-show-results">
                            <span>See My Recommendations</span> 👀
                        </button>
                    </div>
                </div>

                <!-- Results -->
                <div id="results">
                    <div class="results-header">
                        <h2>Perfect! Here's your personalized path:</h2>
                    </div>
                    <div id="ministry-recommendations" class="ministry-list"></div>

                    <!-- New Ministry Idea Section -->
                    <div class="new-ministry-section">
                        <h3>Missing the ministry you're looking for?</h3>
                        <ul class="new-ministry-list">
                            <li>You're not alone! Help us grow St. Edward by starting something new!</li>
                            <li>We'll help you: Find interested members • Navigate parish processes • Get the word out</li>
                            <li>You can't do it alone and neither can we!</li>
                        </ul>
                        <a href="https://stedward.org/contact-us" target="_blank" class="new-ministry-btn">
                            <span class="btn-icon">🚀</span> Let's Build It Together
                        </a>
                    </div>

                    <!-- Add this to templates/index.html in the results section, before parish-registration div -->
                    <div class="parish-registration">
                        <h3>Ready to Take the Next Step?</h3>
                        <p>Join our parish family and stay connected with all these opportunities!</p>
                        
                        <div class="registration-buttons">
                            <a href="https://stedwardnash.flocknote.com/register" target="_blank" class="registration-btn">
                                <span class="btn-icon">🙌</span> Register at St. Edward
                            </a>
                        </div>
                        
                        <div class="social-links">
                            <a href="https://stedward.smugmug.com/" target="_blank">📸 Parish Photos</a>
                            <a href="https://www.instagram.com/stedwardcommunity/" target="_blank">📱 Instagram</a>
                            <a href="https://www.facebook.com/stedwardschool" target="_blank">👥 Facebook</a>
                        </div>
                    </div>
                    
                    <div class="contact-info">
                        <h4>Have Questions? We're Here to Help!</h4>
                        <p><strong>Call:</strong> (615) 833-5520</p>
                        <p><strong>Email:</strong> <a href="mailto:support@stedward.org">support@stedward.org</a></p>
                        <p><strong>Visit:</strong> <a href="https://stedward.org" target="_blank">stedward.org</a></p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="restart-btn btn-restart">
                            <span class="btn-icon">🔄</span> Start Over
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-info">
                <h3>St. Edward Church & School</h3>
                <p>188 Thompson Lane, Nashville, TN 37211</p>
                <p>
                    <a href="mailto:support@stedward.org">support@stedward.org</a> • 
                    <a href="tel:6158335520">(615) 833-5520</a>
                </p>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="copyright-year"></span> St. Edward Church & School. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Load JavaScript files -->
    <script src="{{ url_for('static', filename='js/confetti.js') }}"></script>
    <script src="{{ url_for('static', filename='js/quiz.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pwa.js') }}"></script>
    <script>
        // Set copyright year
        document.getElementById('copyright-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>
